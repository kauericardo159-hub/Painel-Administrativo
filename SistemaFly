-- Nome: Fly_V4_Injector
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local camera = workspace.CurrentCamera

-- Localizar o Painel V4
local pGui = player:WaitForChild("PlayerGui")
local mainGui = pGui:WaitForChild("MainControlPanel", 15)
local scroll = mainGui.MainFrame:WaitForChild("ButtonList")

local flying = false
local flySpeed = 16
local bv, bg

-- Criar Botão Estiloso
local Container = Instance.new("Frame")
Container.Name = "FlyContainer"
Container.Parent = scroll
Container.Size = UDim2.new(1, -10, 0, 50)
Container.BackgroundTransparency = 1

local Layout = Instance.new("UIListLayout", Container)
Layout.FillDirection = Enum.FillDirection.Horizontal
Layout.Padding = UDim.new(0, 10)
Layout.VerticalAlignment = Enum.VerticalAlignment.Center

local SpeedInput = Instance.new("TextBox")
SpeedInput.Size = UDim2.new(0, 80, 0, 40)
SpeedInput.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
SpeedInput.Text = "50"
SpeedInput.TextColor3 = Color3.new(1,1,1)
SpeedInput.Font = Enum.Font.GothamBold
Instance.new("UICorner", SpeedInput)

local ToggleBtn = Instance.new("TextButton")
ToggleBtn.Size = UDim2.new(1, -90, 0, 40)
ToggleBtn.BackgroundColor3 = Color3.fromRGB(180, 50, 50)
ToggleBtn.Text = "FLY: DESATIVADO"
ToggleBtn.TextColor3 = Color3.new(1,1,1)
ToggleBtn.Font = Enum.Font.GothamBold
Instance.new("UICorner", ToggleBtn)

-- Lógica de Voo
ToggleBtn.MouseButton1Click:Connect(function()
    flying = not flying
    flySpeed = tonumber(SpeedInput.Text) or 50
    character = player.Character
    
    if flying then
        ToggleBtn.Text = "FLY: ATIVO"
        ToggleBtn.BackgroundColor3 = Color3.fromRGB(50, 180, 100)
        
        bg = Instance.new("BodyGyro", character.HumanoidRootPart)
        bg.maxTorque = Vector3.new(9e9, 9e9, 9e9)
        bg.P = 12000
        bv = Instance.new("BodyVelocity", character.HumanoidRootPart)
        bv.maxForce = Vector3.new(9e9, 9e9, 9e9)
        
        character.Humanoid.PlatformStand = true
        
        task.spawn(function()
            while flying do
                local moveDir = character.Humanoid.MoveDirection
                if moveDir.Magnitude > 0 then
                    bv.velocity = camera.CFrame:VectorToWorldSpace(Vector3.new(moveDir.X, 0, moveDir.Z * -1).Unit * flySpeed)
                else
                    bv.velocity = Vector3.new(0, 0.1, 0)
                end
                bg.cframe = camera.CFrame
                task.wait()
            end
        end)
    else
        ToggleBtn.Text = "FLY: DESATIVADO"
        ToggleBtn.BackgroundColor3 = Color3.fromRGB(180, 50, 50)
        if bv then bv:Destroy() end
        if bg then bg:Destroy() end
        character.Humanoid.PlatformStand = false
    end
end)
