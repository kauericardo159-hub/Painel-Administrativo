-- Nome: Fly_V7_Injector
local player = game.Players.LocalPlayer
local camera = workspace.CurrentCamera
local RunService = game:GetService("RunService")

local pGui = player:WaitForChild("PlayerGui")
local mainGui = pGui:WaitForChild("MainControlPanel", 15)
local scroll = mainGui.MainFrame:WaitForChild("ButtonList")

local flying = false
local speed = 50
local bv, bg

-- Botão Customizado
local FlyButton = Instance.new("TextButton")
FlyButton.Name = "FlyButton"
FlyButton.Parent = scroll
FlyButton.Size = UDim2.new(0.9, 0, 0, 45) -- Tamanho fixo que o painel vai respeitar
FlyButton.BackgroundColor3 = Color3.fromRGB(30, 30, 35)
FlyButton.Text = "1 | ATIVAR FLY CONTROL"
FlyButton.TextColor3 = Color3.new(1, 1, 1)
FlyButton.Font = Enum.Font.GothamBold
FlyButton.TextSize = 14

local corner = Instance.new("UICorner", FlyButton)
local stroke = Instance.new("UIStroke", FlyButton)
stroke.Color = Color3.fromRGB(0, 170, 255)

FlyButton.MouseButton1Click:Connect(function()
    flying = not flying
    if flying then
        FlyButton.Text = "1 | FLY: ATIVO"
        FlyButton.BackgroundColor3 = Color3.fromRGB(0, 80, 50)
        -- Lógica do Fly (BodyVelocity/BodyGyro)
        local char = player.Character
        bg = Instance.new("BodyGyro", char.HumanoidRootPart)
        bg.maxTorque = Vector3.new(9e9, 9e9, 9e9)
        bv = Instance.new("BodyVelocity", char.HumanoidRootPart)
        bv.maxForce = Vector3.new(9e9, 9e9, 9e9)
        char.Humanoid.PlatformStand = true
        task.spawn(function()
            while flying do
                local dir = camera.CFrame.LookVector
                if char.Humanoid.MoveDirection.Magnitude > 0 then
                    bv.velocity = (camera.CFrame:VectorToWorldSpace(Vector3.new(char.Humanoid.MoveDirection.X, 0, char.Humanoid.MoveDirection.Z * -1)).Unit) * speed
                else
                    bv.velocity = Vector3.new(0, 0.1, 0)
                end
                bg.cframe = camera.CFrame
                RunService.RenderStepped:Wait()
            end
            if bg then bg:Destroy() end
            if bv then bv:Destroy() end
            char.Humanoid.PlatformStand = false
        end)
    else
        FlyButton.Text = "1 | ATIVAR FLY CONTROL"
        FlyButton.BackgroundColor3 = Color3.fromRGB(30, 30, 35)
    end
end)
