-- Nome do Script: MainControlPanel_V4_Final
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local Stats = game:GetService("Stats")
local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- Remover vers√µes antigas para evitar bugs de sobreposi√ß√£o
if player.PlayerGui:FindFirstChild("MainControlPanel") then
    player.PlayerGui.MainControlPanel:Destroy()
end

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "MainControlPanel"
ScreenGui.Parent = player:WaitForChild("PlayerGui")
ScreenGui.ResetOnSpawn = false

-- --- FRAME PRINCIPAL ---
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Color3.fromRGB(10, 10, 12)
MainFrame.Position = UDim2.new(0.5, -350, 0.5, -200)
MainFrame.Size = UDim2.new(0, 700, 0, 400)
MainFrame.ClipsDescendants = true
MainFrame.Visible = false -- Come√ßa invis√≠vel para a anima√ß√£o de abertura

local UICorner = Instance.new("UICorner", MainFrame)
UICorner.CornerRadius = UDim.new(0, 20)

local UIStroke = Instance.new("UIStroke", MainFrame)
UIStroke.Thickness = 2
UIStroke.Transparency = 0.5
UIStroke.Color = Color3.fromRGB(0, 170, 255)

-- --- FUNDO ANIMADO (PART√çCULAS LUA) ---
local ParticleContainer = Instance.new("Frame", MainFrame)
ParticleContainer.Size = UDim2.new(1, 0, 1, 0)
ParticleContainer.BackgroundTransparency = 1
ParticleContainer.ZIndex = 1

local function CreateParticle()
    local p = Instance.new("Frame", ParticleContainer)
    local size = math.random(2, 5)
    p.Size = UDim2.new(0, size, 0, size)
    p.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
    p.BackgroundTransparency = 0.7
    p.Position = UDim2.new(math.random(), 0, 1, 0)
    Instance.new("UICorner", p).CornerRadius = UDim.new(1, 0)
    
    local speed = math.random(5, 15) / 10
    task.spawn(function()
        while p.Parent do
            p.Position = p.Position - UDim2.new(0, 0, 0.002 * speed, 0)
            if p.Position.Y.Scale < -0.1 then p.Position = UDim2.new(math.random(), 0, 1, 0) end
            RunService.RenderStepped:Wait()
        end
    end)
end

for i = 1, 20 do CreateParticle() end

-- --- CABE√áALHO ---
local Header = Instance.new("Frame", MainFrame)
Header.Size = UDim2.new(1, 0, 0, 50)
Header.BackgroundColor3 = Color3.fromRGB(20, 20, 25)
Header.ZIndex = 3

local Title = Instance.new("TextLabel", Header)
Title.Size = UDim2.new(1, 0, 1, 0)
Title.BackgroundTransparency = 1
Title.Text = "SYSTEM ADMIN ‚Ä¢ PREMIUM v4"
Title.TextColor3 = Color3.new(1, 1, 1)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 18
Title.ZIndex = 4

-- --- LISTA DE BOT√ïES (CENTRAL) ---
local ButtonList = Instance.new("ScrollingFrame", MainFrame)
ButtonList.Name = "ButtonList"
ButtonList.Position = UDim2.new(0, 15, 0, 60)
ButtonList.Size = UDim2.new(0, 450, 1, -75)
ButtonList.BackgroundTransparency = 1
ButtonList.ScrollBarThickness = 2
ButtonList.ScrollBarImageColor3 = Color3.fromRGB(0, 170, 255)
ButtonList.CanvasSize = UDim2.new(0, 0, 0, 0)
ButtonList.ZIndex = 5

local UIList = Instance.new("UIListLayout", ButtonList)
UIList.Padding = UDim.new(0, 8)
UIList.SortOrder = Enum.SortOrder.LayoutOrder

UIList:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
    ButtonList.CanvasSize = UDim2.new(0, 0, 0, UIList.AbsoluteContentSize.Y + 10)
end)

-- --- PAINEL LATERAL (STATS) ---
local StatsFrame = Instance.new("Frame", MainFrame)
StatsFrame.Position = UDim2.new(0, 480, 0, 60)
StatsFrame.Size = UDim2.new(0, 205, 1, -75)
StatsFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
StatsFrame.BackgroundTransparency = 0.8
StatsFrame.ZIndex = 3

Instance.new("UICorner", StatsFrame).CornerRadius = UDim.new(0, 15)

local StatsLayout = Instance.new("UIListLayout", StatsFrame)
StatsLayout.Padding = UDim.new(0, 12)
StatsLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center

local function AddStat(name, icon)
    local l = Instance.new("TextLabel", StatsFrame)
    l.Name = name
    l.Size = UDim2.new(0.9, 0, 0, 25)
    l.BackgroundTransparency = 1
    l.TextColor3 = Color3.fromRGB(200, 200, 200)
    l.Font = Enum.Font.GothamMedium
    l.TextSize = 13
    l.TextXAlignment = Enum.TextXAlignment.Left
    l.ZIndex = 4
    return l
end

local fpsL = AddStat("FPS")
local pingL = AddStat("Ping")
local serverL = AddStat("Server")
local playerL = AddStat("Players")
local sessionL = AddStat("Session")
local ageL = AddStat("Age")

-- --- ATUALIZA√á√ÉO EM TEMPO REAL ---
local startSession = tick()
RunService.Heartbeat:Connect(function(dt)
    if not MainFrame.Visible then return end
    fpsL.Text = "‚ö° FPS: " .. math.floor(1/dt)
    pingL.Text = "üì° PING: " .. math.floor(Stats.Network.ServerStatsItem["Data Ping"]:GetValue()) .. "ms"
    playerL.Text = "üë• PLAYERS: " .. #Players:GetPlayers() .. "/" .. Players.MaxPlayers
    sessionL.Text = "‚è±Ô∏è SESS√ÉO: " .. math.floor(tick() - startSession) .. "s"
    ageL.Text = "üìÖ SERVER: " .. math.floor(workspace.DistributedGameTime) .. "s"
    serverL.Text = "üÜî ID: " .. game.JobId:sub(1,6)
end)

-- --- ANIMA√á√ÉO DE ABERTURA ---
MainFrame:GetPropertyChangedSignal("Visible"):Connect(function()
    if MainFrame.Visible then
        MainFrame.Size = UDim2.new(0, 700, 0, 0)
        TweenService:Create(MainFrame, TweenInfo.new(0.6, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {
            Size = UDim2.new(0, 700, 0, 400)
        }):Play()
    end
end)
