-- Nome: MainControlPanel_V5
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local player = game.Players.LocalPlayer
local pGui = player:WaitForChild("PlayerGui")

-- Limpeza de versÃµes anteriores
if pGui:FindFirstChild("MainControlPanel") then pGui.MainControlPanel:Destroy() end

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "MainControlPanel"
ScreenGui.Parent = pGui
ScreenGui.ResetOnSpawn = false

-- Frame Principal
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 20)
MainFrame.Position = UDim2.new(0.5, -350, 0.5, -200)
MainFrame.Size = UDim2.new(0, 700, 0, 400)
MainFrame.ClipsDescendants = true
MainFrame.Visible = false

local UICorner = Instance.new("UICorner", MainFrame)
UICorner.CornerRadius = UDim.new(0, 20)

-- FUNDO ANIMADO (Gradiente Fluido)
local Grad = Instance.new("UIGradient")
Grad.Color = ColorSequence.new({
	ColorSequenceKeypoint.new(0, Color3.fromRGB(20, 20, 40)),
	ColorSequenceKeypoint.new(0.5, Color3.fromRGB(40, 20, 60)),
	ColorSequenceKeypoint.new(1, Color3.fromRGB(20, 20, 40))
})
Grad.Parent = MainFrame

task.spawn(function()
	while true do
		Grad.Rotation = Grad.Rotation + 1
		task.wait(0.02)
	end
end)

-- CABEÃ‡ALHO
local Header = Instance.new("Frame", MainFrame)
Header.Size = UDim2.new(1, 0, 0, 50)
Header.BackgroundTransparency = 0.9
Header.BackgroundColor3 = Color3.new(1,1,1)

local Title = Instance.new("TextLabel", Header)
Title.Size = UDim2.new(1, 0, 1, 0)
Title.Text = "SISTEMA ADMINISTRATIVO V5"
Title.TextColor3 = Color3.new(1,1,1)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 20
Title.BackgroundTransparency = 1

-- LISTA DE BOTÃ•ES (Ajustada)
local Scroll = Instance.new("ScrollingFrame")
Scroll.Name = "ButtonList"
Scroll.Parent = MainFrame
Scroll.Position = UDim2.new(0, 15, 0, 60)
Scroll.Size = UDim2.new(0, 460, 1, -75)
Scroll.BackgroundTransparency = 1
Scroll.BorderSizePixel = 0
Scroll.ScrollBarThickness = 4
Scroll.CanvasSize = UDim2.new(0, 0, 0, 0) -- ComeÃ§a em 0
Scroll.ScrollBarImageColor3 = Color3.fromRGB(0, 255, 200)

local UIList = Instance.new("UIListLayout", Scroll)
UIList.Padding = UDim.new(0, 10)
UIList.SortOrder = Enum.SortOrder.LayoutOrder

-- FIX: FunÃ§Ã£o que obriga o Canvas a crescer quando um botÃ£o entra
local function ForceResize()
	Scroll.CanvasSize = UDim2.new(0, 0, 0, UIList.AbsoluteContentSize.Y + 20)
end

UIList:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(ForceResize)

-- PAINEL LATERAL (STATS)
local StatsFrame = Instance.new("Frame", MainFrame)
StatsFrame.Position = UDim2.new(0, 490, 0, 60)
StatsFrame.Size = UDim2.new(0, 195, 1, -75)
StatsFrame.BackgroundColor3 = Color3.new(0,0,0)
StatsFrame.BackgroundTransparency = 0.8
Instance.new("UICorner", StatsFrame)

local function CreateStat(name, pos)
	local l = Instance.new("TextLabel", StatsFrame)
	l.Size = UDim2.new(1, -20, 0, 30)
	l.Position = UDim2.new(0, 10, 0, pos)
	l.BackgroundTransparency = 1
	l.TextColor3 = Color3.new(0.8, 0.8, 0.8)
	l.Font = Enum.Font.GothamMedium
	l.TextSize = 14
	l.TextXAlignment = Enum.TextXAlignment.Left
	return l
end

local fL = CreateStat("FPS: --", 10)
local pL = CreateStat("PING: --", 45)
local sL = CreateStat("PLAYERS: --", 80)

-- Update Stats
RunService.RenderStepped:Connect(function(dt)
	if MainFrame.Visible then
		fL.Text = "âš¡ FPS: " .. math.floor(1/dt)
		pL.Text = "ðŸ“¡ PING: " .. math.floor(game:GetService("Stats").Network.ServerStatsItem["Data Ping"]:GetValue()) .. "ms"
		sL.Text = "ðŸ‘¥ PLAYERS: " .. #game.Players:GetPlayers()
	end
end)

-- AnimaÃ§Ã£o de Abrir
MainFrame:GetPropertyChangedSignal("Visible"):Connect(function()
	if MainFrame.Visible then
		MainFrame.Size = UDim2.new(0, 0, 0, 400)
		TweenService:Create(MainFrame, TweenInfo.new(0.5, Enum.EasingStyle.Back), {Size = UDim2.new(0, 700, 0, 400)}):Play()
	end
end)
