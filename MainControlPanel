-- Nome do Script: MainControlPanel_V4_Ultimate
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local Stats = game:GetService("Stats")
local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- Destruir vers√£o antiga se existir para evitar duplicatas
if player.PlayerGui:FindFirstChild("MainControlPanel") then
    player.PlayerGui.MainControlPanel:Destroy()
end

-- ScreenGui principal
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "MainControlPanel"
ScreenGui.Parent = player.PlayerGui
ScreenGui.ResetOnSpawn = false

-- Frame de Fundo Principal (com efeito de vidro)
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
MainFrame.BackgroundTransparency = 0.2 -- Transpar√™ncia para o fundo brilhar
MainFrame.Position = UDim2.new(0.5, -350, 0.5, -200)
MainFrame.Size = UDim2.new(0, 700, 0, 400)
MainFrame.ClipsDescendants = true
MainFrame.Visible = false -- Inicia invis√≠vel

local UICorner = Instance.new("UICorner", MainFrame)
UICorner.CornerRadius = UDim.new(0, 20)

local UIStroke = Instance.new("UIStroke", MainFrame)
UIStroke.Thickness = 2
UIStroke.Color = Color3.fromRGB(80, 80, 80)
UIStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

-- --- FUNDO ANIMADO MULTICAMADAS ---
-- Camada 1: Gradiente suave principal
local BgGradient1 = Instance.new("UIGradient")
BgGradient1.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(25, 25, 40)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(45, 30, 60)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(25, 25, 40))
}
BgGradient1.Parent = MainFrame
BgGradient1.Rotation = 0

-- Camada 2: Gradiente secund√°rio para efeito de movimento
local BgGradient2 = Instance.new("UIGradient")
BgGradient2.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(30, 30, 50)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(50, 35, 70)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(30, 30, 50))
}
BgGradient2.Parent = MainFrame
BgGradient2.Rotation = 90
BgGradient2.Transparency = NumberSequence.new(0.5)

-- Anima√ß√£o dos gradientes
task.spawn(function()
    local rot1 = 0
    local rot2 = 90
    while true do
        rot1 = (rot1 + 0.5) % 360
        rot2 = (rot2 - 1) % 360
        BgGradient1.Rotation = rot1
        BgGradient2.Rotation = rot2
        task.wait(0.04)
    end
end)

-- Cabe√ßalho Integrado
local HeaderFrame = Instance.new("Frame")
HeaderFrame.Name = "Header"
HeaderFrame.Parent = MainFrame
HeaderFrame.Size = UDim2.new(1, 0, 0, 60)
HeaderFrame.Position = UDim2.new(0, 0, 0, 0)
HeaderFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 35)
HeaderFrame.BackgroundTransparency = 0.1 -- Efeito de vidro

local HeaderGradient = Instance.new("UIGradient", HeaderFrame)
HeaderGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(50, 50, 60)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(20, 20, 25))
}
HeaderGradient.Rotation = 90

local HeaderCorner = Instance.new("UICorner", HeaderFrame)
HeaderCorner.CornerRadius = UDim.new(0, 18) -- Menor que o painel principal
HeaderCorner.CornerType = Enum.CornerType.Round
HeaderCorner.Parent = HeaderFrame

local HeaderStroke = Instance.new("UIStroke", HeaderFrame)
HeaderStroke.Thickness = 1
HeaderStroke.Color = Color3.fromRGB(100, 100, 100)
HeaderStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

local TitleLabel = Instance.new("TextLabel")
TitleLabel.Name = "Title"
TitleLabel.Parent = HeaderFrame
TitleLabel.Size = UDim2.new(1, 0, 1, 0)
TitleLabel.BackgroundTransparency = 1
TitleLabel.Text = "ULTIMATE ADMIN HUB"
TitleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TitleLabel.Font = Enum.Font.GothamBold
TitleLabel.TextSize = 24
TitleLabel.TextXAlignment = Enum.TextXAlignment.Center
TitleLabel.TextYAlignment = Enum.TextYAlignment.Center

-- Painel Esquerdo: √Årea para Bot√µes de Rolagem
local ButtonsPanel = Instance.new("ScrollingFrame")
ButtonsPanel.Name = "ButtonList"
ButtonsPanel.Parent = MainFrame
ButtonsPanel.Position = UDim2.new(0, 20, 0, 80)
ButtonsPanel.Size = UDim2.new(0, 420, 1, -100) -- Ajustado para caber o painel de stats
ButtonsPanel.BackgroundTransparency = 1
ButtonsPanel.BorderSizePixel = 0
ButtonsPanel.ScrollBarThickness = 6
ButtonsPanel.ScrollBarColor3 = Color3.fromRGB(70, 70, 70)
ButtonsPanel.CanvasSize = UDim2.new(0, 0, 0, 0) -- Ser√° atualizado dinamicamente

local ButtonsLayout = Instance.new("UIListLayout")
ButtonsLayout.Parent = ButtonsPanel
ButtonsLayout.Padding = UDim.new(0, 12) -- Mais espa√ßo entre os bot√µes
ButtonsLayout.SortOrder = Enum.SortOrder.LayoutOrder
ButtonsLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center

-- Atualiza√ß√£o autom√°tica do CanvasSize
ButtonsLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
    ButtonsPanel.CanvasSize = UDim2.new(0, 0, 0, ButtonsLayout.AbsoluteContentSize.Y + 20)
end)

-- Painel Direito: Stats
local StatsPanel = Instance.new("Frame")
StatsPanel.Name = "StatsFrame"
StatsPanel.Parent = MainFrame
StatsPanel.Position = UDim2.new(0, 460, 0, 80)
StatsPanel.Size = UDim2.new(0, 220, 1, -100)
StatsPanel.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
StatsPanel.BackgroundTransparency = 0.85

local StatsCorner = Instance.new("UICorner", StatsPanel)
StatsCorner.CornerRadius = UDim.new(0, 15)

local StatsLayout = Instance.new("UIListLayout", StatsPanel)
StatsLayout.Padding = UDim.new(0, 15)
StatsLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
StatsLayout.VerticalAlignment = Enum.VerticalAlignment.Top

local function CreateStatLabel(name, parent)
    local lbl = Instance.new("TextLabel")
    lbl.Name = name
    lbl.Parent = parent
    lbl.Size = UDim2.new(0.9, 0, 0, 25)
    lbl.BackgroundTransparency = 1
    lbl.TextColor3 = Color3.fromRGB(200, 200, 200)
    lbl.Font = Enum.Font.GothamMedium
    lbl.TextSize = 14
    lbl.TextXAlignment = Enum.TextXAlignment.Left
    lbl.RichText = true -- Para negrito e cores futuras
    return lbl
end

local fpsLbl = CreateStatLabel("FPS", StatsPanel)
local pingLbl = CreateStatLabel("Ping", StatsPanel)
local serverLbl = CreateStatLabel("ServerID", StatsPanel)
local playersLbl = CreateStatLabel("Players", StatsPanel)
local playTimeLbl = CreateStatLabel("PlayTime", StatsPanel)
local ageLbl = CreateStatLabel("ServerAge", StatsPanel)

-- L√≥gica de Atualiza√ß√£o das Stats
local startTime = tick()
RunService.RenderStepped:Connect(function(dt)
    if not MainFrame.Visible then return end -- Otimiza√ß√£o: s√≥ atualiza se estiver vis√≠vel
    
    local fps = math.floor(1/dt)
    local ping = math.floor(Stats.Network.ServerStatsItem["Data Ping"]:GetValue())
    local pCount = #Players:GetPlayers()
    local sAge = math.floor(workspace.DistributedGameTime)
    local pTime = math.floor(tick() - startTime)

    fpsLbl.Text = "‚ö° <b>FPS:</b> " .. fps
    pingLbl.Text = "üì° <b>PING:</b> " .. ping .. "ms"
    serverLbl.Text = "üÜî <b>SERVER:</b> " .. game.JobId:sub(1,8) .. "..."
    playersLbl.Text = "üë• <b>PLAYERS:</b> " .. pCount .. "/" .. game.Players.MaxPlayers
    playTimeLbl.Text = "‚è±Ô∏è <b>SESS√ÉO:</b> " .. pTime .. "s"
    ageLbl.Text = "üìÖ <b>IDADE SV:</b> " .. sAge .. "s"
end)

-- Anima√ß√£o de Abrir/Fechar do Painel
MainFrame:GetPropertyChangedSignal("Visible"):Connect(function()
    if MainFrame.Visible then
        MainFrame.GroupTransparency = 1 -- Inicia invis√≠vel para a anima√ß√£o
        MainFrame.Size = UDim2.new(0, 600, 0, 300) -- Come√ßa menor
        TweenService:Create(MainFrame, TweenInfo.new(0.6, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {
            Size = UDim2.new(0, 700, 0, 400), -- Expande para o tamanho final
            GroupTransparency = 0 -- Torna vis√≠vel
        }):Play()
    else
        local tween = TweenService:Create(MainFrame, TweenInfo.new(0.4, Enum.EasingStyle.Quart, Enum.EasingDirection.In), {
            Size = UDim2.new(0, 0, 0, 400), -- Contrai para fechar
            GroupTransparency = 1
        })
        tween:Play()
        tween.Completed:Connect(function()
            if MainFrame.GroupTransparency == 1 then -- S√≥ esconde se estiver completamente transparente
                MainFrame.Visible = false
            end
        end)
    end
end)
