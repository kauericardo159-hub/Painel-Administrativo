-- Nome: MainControlPanel_V7_Fixed
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local player = game.Players.LocalPlayer
local pGui = player:WaitForChild("PlayerGui")

if pGui:FindFirstChild("MainControlPanel") then pGui.MainControlPanel:Destroy() end

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "MainControlPanel"
ScreenGui.Parent = pGui
ScreenGui.ResetOnSpawn = false

-- --- FRAME PRINCIPAL ---
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 22)
MainFrame.Position = UDim2.new(0.5, -350, 0.5, -200)
MainFrame.Size = UDim2.new(0, 700, 0, 400)
MainFrame.ClipsDescendants = true
MainFrame.Visible = false

local UICorner = Instance.new("UICorner", MainFrame)
UICorner.CornerRadius = UDim.new(0, 15)

-- Borda Neon
local MainStroke = Instance.new("UIStroke", MainFrame)
MainStroke.Thickness = 2.5
MainStroke.Color = Color3.fromRGB(0, 170, 255)

-- --- FUNDO ANIMADO ---
local BgGradient = Instance.new("UIGradient", MainFrame)
BgGradient.Color = ColorSequence.new{
	ColorSequenceKeypoint.new(0, Color3.fromRGB(10, 10, 25)),
	ColorSequenceKeypoint.new(1, Color3.fromRGB(40, 20, 50))
}

task.spawn(function()
	while true do
		BgGradient.Rotation = BgGradient.Rotation + 1
		task.wait(0.05)
	end
end)

-- --- HEADER ---
local Header = Instance.new("Frame", MainFrame)
Header.Size = UDim2.new(1, 0, 0, 50)
Header.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Header.BackgroundTransparency = 0.95

local Title = Instance.new("TextLabel", Header)
Title.Size = UDim2.new(1, 0, 1, 0)
Title.BackgroundTransparency = 1
Title.Text = "SYSTEM CONTROL ‚Ä¢ V7 FIXED"
Title.TextColor3 = Color3.new(1, 1, 1)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 18

-- --- SCROLLING FRAME (CORRIGIDA) ---
local Scroll = Instance.new("ScrollingFrame", MainFrame)
Scroll.Name = "ButtonList"
Scroll.Size = UDim2.new(0, 460, 1, -80)
Scroll.Position = UDim2.new(0, 20, 0, 65)
Scroll.BackgroundColor3 = Color3.fromRGB(35, 35, 40)
Scroll.BackgroundTransparency = 0.5
Scroll.BorderSizePixel = 0
Scroll.ScrollBarThickness = 4
Scroll.ScrollBarImageColor3 = Color3.fromRGB(0, 170, 255)
Scroll.ClipsDescendants = true
Scroll.AutomaticCanvasSize = Enum.AutomaticSize.Y -- O segredo para rolar sozinho
Scroll.CanvasSize = UDim2.new(0, 0, 0, 0) -- Come√ßa zerado e expande

local ScrollCorner = Instance.new("UICorner", Scroll)

-- LAYOUT AUTOM√ÅTICO (Organiza sem deformar os bot√µes)
local Layout = Instance.new("UIListLayout", Scroll)
Layout.Padding = UDim.new(0, 10)
Layout.SortOrder = Enum.SortOrder.LayoutOrder
Layout.HorizontalAlignment = Enum.HorizontalAlignment.Center
-- IMPORTANTE: N√£o usamos FillEmptySpace ou escalas for√ßadas aqui para n√£o mexer no Size dos bot√µes

local UIPadding = Instance.new("UIPadding", Scroll)
UIPadding.PaddingTop = UDim.new(0, 10)
UIPadding.PaddingBottom = UDim.new(0, 10)

-- --- PAINEL DE STATS (DIREITA) ---
local StatsFrame = Instance.new("Frame", MainFrame)
StatsFrame.Position = UDim2.new(1, -200, 0, 65)
StatsFrame.Size = UDim2.new(0, 180, 1, -80)
StatsFrame.BackgroundTransparency = 1

local function CreateStatBox(name, color)
	local box = Instance.new("TextLabel", StatsFrame)
	box.Size = UDim2.new(1, 0, 0, 35)
	box.BackgroundColor3 = Color3.fromRGB(20, 20, 25)
	box.TextColor3 = Color3.fromRGB(220, 220, 220)
	box.Font = Enum.Font.GothamMedium
	box.TextSize = 12
	box.Text = " " .. name .. ": --"
	box.TextXAlignment = Enum.TextXAlignment.Left
	
	Instance.new("UICorner", box)
	local s = Instance.new("UIStroke", box)
	s.Color = color
	s.Thickness = 1
	return box
end

local fpsL = CreateStatBox("‚ö° FPS", Color3.fromRGB(0, 255, 150))
local pingL = CreateStatBox("üì° PING", Color3.fromRGB(255, 150, 0))
local playL = CreateStatBox("üë• PLAYERS", Color3.fromRGB(150, 0, 255))
local ageL = CreateStatBox("üìÖ IDADE SV", Color3.fromRGB(255, 50, 50))

Instance.new("UIListLayout", StatsFrame).Padding = UDim.new(0, 8)

-- Loop de Stats
RunService.RenderStepped:Connect(function(dt)
	if MainFrame.Visible then
		fpsL.Text = " ‚ö° FPS: " .. math.floor(1/dt)
		pingL.Text = " üì° PING: " .. math.floor(game:GetService("Stats").Network.ServerStatsItem["Data Ping"]:GetValue()) .. "ms"
		playL.Text = " üë• PLAYERS: " .. #game.Players:GetPlayers()
		ageL.Text = " üìÖ IDADE SV: " .. math.floor(workspace.DistributedGameTime) .. "s"
	end
end)

-- --- ANIMA√á√ÉO DE ABRIR ---
MainFrame.Visible = true -- Para testes, mude para false se quiser abrir via bot√£o
MainFrame.Size = UDim2.new(0, 0, 0, 0)
TweenService:Create(MainFrame, TweenInfo.new(0.5, Enum.EasingStyle.Back), {Size = UDim2.new(0, 700, 0, 400)}):Play()
