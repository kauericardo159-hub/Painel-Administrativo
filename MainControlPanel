-- Nome do Script: MainControlPanel_V4_Enhanced
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local Stats = game:GetService("Stats")
local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- Destruir vers√£o antiga se existir para evitar duplicatas
if player.PlayerGui:FindFirstChild("MainControlPanel") then
    player.PlayerGui.MainControlPanel:Destroy()
end

-- ScreenGui base
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "MainControlPanel"
ScreenGui.Parent = player:WaitForChild("PlayerGui")
ScreenGui.ResetOnSpawn = false

-- Fundo Animado do Painel (Frame principal com gradiente animado)
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Color3.fromRGB(18, 18, 28) -- Cor de fundo base mais escura
MainFrame.Position = UDim2.new(0.5, -375, 0.5, -225)
MainFrame.Size = UDim2.new(0, 750, 0, 450) -- Ligeiramente maior para mais espa√ßo
MainFrame.ClipsDescendants = true
MainFrame.Visible = false
MainFrame.Transparency = 0 -- Come√ßa totalmente vis√≠vel, a anima√ß√£o de Fade-in lida com isso

local UICorner = Instance.new("UICorner", MainFrame)
UICorner.CornerRadius = UDim.new(0, 25) -- Cantos mais arredondados

local UIStroke = Instance.new("UIStroke", MainFrame)
UIStroke.Thickness = 3 -- Borda um pouco mais grossa
UIStroke.Color = Color3.fromRGB(80, 80, 100)
UIStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

-- Gradiente de Fundo Animado (Mais Vibrante)
local BackgroundGradient = Instance.new("UIGradient")
BackgroundGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(25, 25, 40)),
    ColorSequenceKeypoint.new(0.3, Color3.fromRGB(45, 30, 60)), -- Ponto de cor intermedi√°rio
    ColorSequenceKeypoint.new(0.7, Color3.fromRGB(30, 45, 65)), -- Outro ponto
    ColorSequenceKeypoint.new(1, Color3.fromRGB(25, 25, 40))
}
BackgroundGradient.Parent = MainFrame
BackgroundGradient.Rotation = 0

-- Anima√ß√£o do Gradiente
local gradientRotationSpeed = 0.5 -- Velocidade da rota√ß√£o (ajuste a gosto)
task.spawn(function()
    while MainFrame.Parent do -- Continua animando enquanto o painel existir
        BackgroundGradient.Rotation = (BackgroundGradient.Rotation + gradientRotationSpeed) % 360
        task.wait()
    end
end)

-- Cabe√ßalho (Header)
local Header = Instance.new("Frame")
Header.Name = "Header"
Header.Parent = MainFrame
Header.Size = UDim2.new(1, 0, 0, 60) -- Cabe√ßalho maior
Header.BackgroundColor3 = Color3.fromRGB(20, 20, 35)
Header.BackgroundTransparency = 0.5 -- Mais transl√∫cido

local HeaderCorner = Instance.new("UICorner", Header)
HeaderCorner.CornerRadius = UDim.new(0, 20) -- Arredondamento para o header tamb√©m

local Title = Instance.new("TextLabel")
Title.Parent = Header
Title.Size = UDim2.new(1, 0, 1, 0)
Title.BackgroundTransparency = 1
Title.Text = "PREMIUM ADMIN SYSTEM"
Title.TextColor3 = Color3.fromRGB(240, 240, 255)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 24 -- Texto maior
Title.TextStrokeTransparency = 0.8 -- Pequeno contorno para destaque

-- √Årea da Lista de Bot√µes (Esquerda)
local ScrollFrame = Instance.new("ScrollingFrame")
ScrollFrame.Name = "ButtonList"
ScrollFrame.Parent = MainFrame
ScrollFrame.Position = UDim2.new(0, 20, 0, 80)
ScrollFrame.Size = UDim2.new(0, 480, 1, -100) -- Maior largura para os bot√µes
ScrollFrame.BackgroundTransparency = 1
ScrollFrame.BorderSizePixel = 0
ScrollFrame.ScrollBarThickness = 5 -- Barra de rolagem mais grossa
ScrollFrame.ScrollBarImageColor3 = Color3.fromRGB(100, 100, 150)
ScrollFrame.ScrollingDirection = Enum.ScrollingDirection.Y -- Rolar apenas na vertical
ScrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0) -- Ser√° ajustado automaticamente

local UIList = Instance.new("UIListLayout", ScrollFrame)
UIList.Padding = UDim.new(0, 12) -- Mais espa√ßamento entre os bot√µes
UIList.SortOrder = Enum.SortOrder.LayoutOrder
UIList.FillDirection = Enum.FillDirection.Vertical -- Garante que os bot√µes se alinhem verticalmente

-- ESSA √â A PARTE CR√çTICA PARA GARANTIR QUE OS BOT√ïES APARE√áAM
-- Ajusta o CanvasSize da ScrollFrame baseado no tamanho total do conte√∫do
local function updateCanvasSize()
    -- Espera um pouco para que os filhos (bot√µes) tenham seus tamanhos calculados
    task.wait(0.1) 
    local contentHeight = UIList.AbsoluteContentSize.Y
    ScrollFrame.CanvasSize = UDim2.new(0, 0, 0, contentHeight + UIList.Padding.Offset * 2) -- Adiciona padding extra
end

UIList:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(updateCanvasSize)
ScrollFrame.ChildAdded:Connect(updateCanvasSize)
ScrollFrame.ChildRemoved:Connect(updateCanvasSize)
-- Chamar uma vez na inicializa√ß√£o, caso j√° existam filhos
updateCanvasSize()


-- Painel de Estat√≠sticas (Direita)
local StatsFrame = Instance.new("Frame")
StatsFrame.Name = "StatsFrame"
StatsFrame.Parent = MainFrame
StatsFrame.Position = UDim2.new(0, 520, 0, 80)
StatsFrame.Size = UDim2.new(0, 210, 1, -100) -- Ligeiramente maior
StatsFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
StatsFrame.BackgroundTransparency = 0.7 -- Mais transparente

local StatsCorner = Instance.new("UICorner", StatsFrame)
StatsCorner.CornerRadius = UDim.new(0, 15)

local StatsList = Instance.new("UIListLayout", StatsFrame)
StatsList.Padding = UDim.new(0, 18) -- Mais espa√ßamento
StatsList.HorizontalAlignment = Enum.HorizontalAlignment.Center
StatsList.VerticalAlignment = Enum.VerticalAlignment.Top

local function CreateStatLabel(name, prefixColor)
    local lbl = Instance.new("TextLabel")
    lbl.Name = name
    lbl.Parent = StatsFrame
    lbl.Size = UDim2.new(0.9, 0, 0, 28) -- Um pouco menor para caber mais
    lbl.BackgroundTransparency = 1
    lbl.TextColor3 = Color3.fromRGB(220, 220, 255) -- Cor mais clara
    lbl.Font = Enum.Font.GothamMedium
    lbl.TextSize = 15
    lbl.TextXAlignment = Enum.TextXAlignment.Left
    lbl.Text = name .. ": --" -- Placeholder
    lbl.RichText = true
    return lbl
end

local fpsLbl = CreateStatLabel("‚ö° FPS", Color3.fromRGB(0, 255, 0))
local pingLbl = CreateStatLabel("üì° PING", Color3.fromRGB(255, 200, 0))
local serverLbl = CreateStatLabel("üÜî SERVER", Color3.fromRGB(0, 170, 255))
local playersLbl = CreateStatLabel("üë• PLAYERS", Color3.fromRGB(255, 100, 255))
local playTimeLbl = CreateStatLabel("‚è±Ô∏è SESS√ÉO", Color3.fromRGB(255, 255, 0))
local ageLbl = CreateStatLabel("üìÖ IDADE SV", Color3.fromRGB(255, 0, 0))

-- L√≥gica de Atualiza√ß√£o das Stats
local startTime = tick()
RunService.RenderStepped:Connect(function(dt)
    if not MainFrame.Visible then return end
    
    local fps = math.floor(1/dt)
    local ping = math.floor(Stats.Network.ServerStatsItem["Data Ping"]:GetValue())
    local pCount = #Players:GetPlayers()
    local sAge = math.floor(workspace.DistributedGameTime)
    local pTime = math.floor(tick() - startTime)

    fpsLbl.Text = "<font color=\"rgb(0,255,0)\">‚ö°</font> FPS: " .. fps
    pingLbl.Text = "<font color=\"rgb(255,200,0)\">üì°</font> PING: " .. ping .. "ms"
    serverLbl.Text = "<font color=\"rgb(0,170,255)\">üÜî</font> SERVER: " .. game.JobId:sub(1,8)
    playersLbl.Text = "<font color=\"rgb(255,100,255)\">üë•</font> PLAYERS: " .. pCount .. "/" .. Players.MaxPlayers
    playTimeLbl.Text = "<font color=\"rgb(255,255,0)\">‚è±Ô∏è</font> SESS√ÉO: " .. pTime .. "s"
    ageLbl.Text = "<font color=\"rgb(255,0,0)\">üìÖ</font> IDADE SV: " .. sAge .. "s"
end)

-- Anima√ß√£o de Abrir/Fechar do Painel (Fade-in/Fade-out e escala)
MainFrame:GetPropertyChangedSignal("Visible"):Connect(function()
    if MainFrame.Visible then
        MainFrame.Transparency = 1 -- Come√ßa invis√≠vel para o fade-in
        MainFrame.Size = UDim2.new(0, 600, 0, 350) -- Tamanho inicial menor
        TweenService:Create(MainFrame, TweenInfo.new(0.6, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {
            Size = UDim2.new(0, 750, 0, 450), -- Tamanho final
            Transparency = 0
        }):Play()
    else
        local tween = TweenService:Create(MainFrame, TweenInfo.new(0.4, Enum.EasingStyle.Quart, Enum.EasingDirection.In), {
            Size = UDim2.new(0, 600, 0, 350), -- Retrai para um tamanho menor
            Transparency = 1
        })
        tween:Play()
        tween.Completed:Connect(function()
            if MainFrame.Transparency >= 0.99 then -- Verifica se est√° quase invis√≠vel
                MainFrame.Visible = false
            end
        end)
    end
end)
